import{_ as i,c as a,a as e,o as n}from"./app-82cUmJ1Q.js";const l={};function t(h,s){return n(),a("div",null,[...s[0]||(s[0]=[e(`<blockquote><p>原帖: https://zhuanlan.zhihu.com/p/141735961</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在根分区写入一个充满 0 的临时大文件，用于把未使用的磁盘空间“清零”，为后续压缩做准备。</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> if=/dev/zero</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of=/zero.file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bs=2M</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 强制把缓存中的数据同步写入磁盘，确保 /zero.file 完整写入。</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sync</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 删除临时填充文件，释放刚刚占用的空间，使这些空间变为“空白的零数据块”。</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /zero.file</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 调用 VMware Tools 对指定挂载点（此处为根分区 /）进行磁盘瘦身操作，压缩虚拟磁盘文件（如 .vmdk）。</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/bin/vmware-toolbox-cmd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> disk</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> shrink</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2)])])}const p=i(l,[["render",t]]),d=JSON.parse('{"path":"/blog/p1nz9lvq/","title":"VMware虚拟磁盘释放","lang":"zh-CN","frontmatter":{"title":"VMware虚拟磁盘释放","createTime":"2025/10/01 00:00:00","permalink":"/blog/p1nz9lvq/","tags":["VMware"]},"readingTime":{"minutes":0.56,"words":167},"git":{"createdTime":1764581567000,"updatedTime":1764920704000,"contributors":[{"name":"halifox","username":"halifox","email":"106858061+halifox@users.noreply.github.com","commits":4,"avatar":"https://avatars.githubusercontent.com/halifox?v=4","url":"https://github.com/halifox"}]},"filePathRelative":"blog/VMware虚拟磁盘释放.md","headers":[],"categoryList":[]}');export{p as comp,d as data};
